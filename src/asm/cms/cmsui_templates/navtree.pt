<tal:block define="items view/tree">

<ul>
<metal:block define-macro="inner">
    <li tal:repeat="item items">
        <a tal:attributes="href python:view.url(item['page'], '@@edit');
                           class python:view.context is item['page'] and 'selected' or ' '"
           tal:content="python:item['page'].title or u'no title'"></a>
        <tal:block define="items item/subpages">
            <ul tal:condition="items">
                <metal:block use-macro="template/macros/inner">
                </metal:block>
            </ul>
        </tal:block>
    </li>
</metal:block>
</ul>

</tal:block>
