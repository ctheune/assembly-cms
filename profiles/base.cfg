[buildout]
develop = .
        extensions/asm.contact/
        extensions/asm.banner/
        extensions/asm.schedule/
        extensions/asm.winter10/
        extensions/asm.summer10/
        extensions/asm.mediagallery/

parts = deveggsvn app lxml data server server2 server3 server4 server5 server6 server7 i18n interpreter tags
    test-core test-schedule test-contact
    asm.cms seleniumrc zodb

versions = versions
extends = versions.cfg
allow-picked-versions = false

[zodb]
recipe = zc.recipe.egg:script
eggs = ZODB3


[deveggsvn]
recipe = infrae.subversion
urls = svn://svn.zope.org/repos/main/gocept.selenium/trunk gocept.selenium
as_eggs = True

[seleniumrc]
recipe = collective.recipe.seleniumrc
url = http://release.seleniumhq.org/selenium-remote-control/1.0.1/selenium-remote-control-1.0.1-dist.zip
md5sum = 068b1adb26a7450717e6d6d67e261b58


[asm.cms]
recipe = gocept.recipe.deploymentsandbox
root = ${buildout:directory}

[tags]
recipe = z3c.recipe.tag:tags
eggs = asm.cms
    asm.contact
    asm.translation
    asm.workflow
    asm.schedule
    asm.mediagallery

[versions]
asm.translation = 0.1.9
asm.workflow = 0.1.5
zc.zodbrecipes = 0.5.0
PIL = 1.1.7
collective.recipe.seleniumrc = 0.3
hexagonit.recipe.download = 1.3.0
z3c.profiler = 0.5.1
z3c.layer.pagelet = 1.0.1
z3c.zrtresource = 1.1
z3c.pagelet = 1.0.3
z3c.macro = 1.2.1
z3c.layer = 0.3.1
z3c.i18n = 0.1.1
zc.configuration = 1.0
z3c.ptcompat = 0.4

z3c.baseregistry = 1.0.0
BareNecessities = 0.2
PyYAML = 3.08
ZODB3 = 3.9.0b4
decorator = 3.0.1
gocept.cache = 0.4
gocept.reference = 0.5.2
lxml = 2.2.2
megrok.pagelet = 0.1
netaddr = 0.6.3
pytz = 2009j
setuptools = 0.6c11
transaction = 1.0a1
z3c.recipe.i18n = 0.5.4
z3c.recipe.staticlxml = 0.7.1
z3c.template = 1.2
zc.buildout = 1.4.3
zc.lockfile = 1.0
zc.recipe.cmmi = 1.2.0
zc.recipe.egg = 1.2.2
zc.recipe.filestorage = 1.0.1
zc.resourcelibrary = 1.1
zc.sourcefactory = 0.3.4
zc.zope3recipes = 0.8.0
zope.file = 0.3
hurry.tinymce = 3.2.3.1
hurry.zoperesource = 0.3
hurry.resource = 0.3
z3c.recipe.tag = 0.2
hurry.query = 0.9.2

[lxml]
recipe = z3c.recipe.staticlxml
egg = lxml

[app]
recipe = zc.zope3recipes>=0.5.3:application
eggs = asm.cms
       asm.banner
       asm.workflow
       asm.translation
       asm.contact
       asm.schedule
       asm.winter10
       asm.summer10
       asm.mediagallery
users = 
site.zcml = <include package="asm.cms" />

            <!-- CMS extensions -->
            <include package="asm.workflow" />
            <include package="asm.translation" />

            <!-- CMS micro applications -->
            <include package="asm.schedule" />
            <include package="asm.banner" />
            <include package="asm.contact" />
            <include package="asm.mediagallery" />

            <!-- CMS skins -->
            <include package="asm.winter10" />
            <include package="asm.summer10" />

            <configure i18n_domain="asm.cms">
              <principal id="zope.manager"
                         title="Manager"
                         login="admin"
                         password_manager="Plain Text"
                         password="${app:admin-password}"
                         />
              <grant role="zope.Manager"
                     principal="zope.manager" />
           ${app:users}
           </configure>

[data]
recipe = zc.recipe.filestorage
location = ${buildout:parts-directory}/data

# this section named so that the start/stop script is called bin/zopectl
[server]
recipe = zc.zope3recipes:instance
application = app
address = :8081
zope.conf =
    <zodb>
        cache-size 10000
        <zeoclient>
            server ${zeo:address}
            storage 1
            cache-size 500 MB
            blob-dir ${data:location}/blobs
            shared-blob-dir yes
        </zeoclient>
    </zodb>
deployment = asm.cms

[server2]
recipe = zc.zope3recipes:instance
application = app
address = :8082
zope.conf =
    <zodb>
        cache-size 10000
        <zeoclient>
            server ${zeo:address}
            storage 1
            cache-size 500 MB
            blob-dir ${data:location}/blobs
            shared-blob-dir yes
        </zeoclient>
    </zodb>
deployment = asm.cms

[server3]
recipe = zc.zope3recipes:instance
application = app
address = :8083
zope.conf =
    <zodb>
        cache-size 10000
        <zeoclient>
            server ${zeo:address}
            storage 1
            cache-size 500 MB
            blob-dir ${data:location}/blobs
            shared-blob-dir yes
        </zeoclient>
    </zodb>
deployment = asm.cms

[server4]
recipe = zc.zope3recipes:instance
application = app
address = :8083
zope.conf =
    <zodb>
        cache-size 10000
        <zeoclient>
            server ${zeo:address}
            storage 1
            cache-size 500 MB
            blob-dir ${data:location}/blobs
            shared-blob-dir yes
        </zeoclient>
    </zodb>
deployment = asm.cms
[server5]
recipe = zc.zope3recipes:instance
application = app
address = :8083
zope.conf =
    <zodb>
        cache-size 10000
        <zeoclient>
            server ${zeo:address}
            storage 1
            cache-size 500 MB
            blob-dir ${data:location}/blobs
            shared-blob-dir yes
        </zeoclient>
    </zodb>
deployment = asm.cms
[server6]
recipe = zc.zope3recipes:instance
application = app
address = :8083
zope.conf =
    <zodb>
        cache-size 10000
        <zeoclient>
            server ${zeo:address}
            storage 1
            cache-size 500 MB
            blob-dir ${data:location}/blobs
            shared-blob-dir yes
        </zeoclient>
    </zodb>
deployment = asm.cms
[server7]
recipe = zc.zope3recipes:instance
application = app
address = :8083
zope.conf =
    <zodb>
        cache-size 10000
        <zeoclient>
            server ${zeo:address}
            storage 1
            cache-size 500 MB
            blob-dir ${data:location}/blobs
            shared-blob-dir yes
        </zeoclient>
    </zodb>
deployment = asm.cms
[zeo]
recipe = zc.zodbrecipes:server
deployment = asm.cms
address = ${asm.cms:run-directory}/zeo.sock
zeo.conf =
    <zeo>
        address ${:address}
        monitor-address 8101
        transaction-timeout 300
    </zeo>
    <filestorage 1>
        path ${data:path}
        blob-dir ${data:location}/blobs
    </filestorage>


[test-core]
recipe = zc.recipe.testrunner
eggs = asm.cms
defaults = ['--tests-pattern', '^f?tests$', '-v', '--color']

[test-schedule]
recipe = zc.recipe.testrunner
eggs = asm.schedule
defaults = ${test-core:defaults}

[test-contact]
recipe = zc.recipe.testrunner
eggs = asm.contact
defaults = ${test-core:defaults}

# this section named so that the i18n scripts are called bin/i18n...
[i18n]
recipe = z3c.recipe.i18n:i18n
packages = asm.cms
eggs = asm.cms
domain = asm.cms
output = src/asm/cms/locales
zcml =

[interpreter]
recipe = zc.recipe.egg
eggs = ${app:eggs}
interpreter = py
