<span tal:replace="structure context/message|nothing" />

<p class="schedulefilter"><strong>Select day:</strong><br />
<tal:block repeat="option view/filter/day_options">
<a tal:attributes="href string:?day=${option/token}&details=${view/filter/details};
                   class option/class_"
     tal:content="option/label">Thursday</a>
<tal:block condition="not:repeat/option/end"> - </tal:block>
</tal:block>
</p>

<p class="schedulefilter"><strong>Select schedule details:</strong><br />
<tal:block repeat="option view/filter/detail_options">
  <a tal:attributes="href string:?details=${option/token}&day=${view/filter/day};
                     class option/class_"
     tal:content="option/label">major events only</a>
<tal:block condition="not:repeat/option/end"> - </tal:block>
</tal:block>
</p>


  <table class="schedule">
    <tal:block repeat="record view/filter/events">
    <tr class="day">
      <th colspan="2" tal:content="python:record['day'].strftime('%A')">
      </th>
    </tr>
    <tal:block repeat="hour_record record/hours">
    <tal:block repeat="event hour_record/events">
    <tr>
      <th tal:condition="repeat/event/start"
        tal:content="python:hour_record['hour'].strftime('%H:%M')"
        tal:attributes="rowspan repeat/event/length">
      </th>
      <td tal:attributes="class python:view.event_class(event)">
        <a tal:content="event/title" tal:attributes="href event/url"></a><br/>
        <a tal:content="event/location" tal:attributes="href event/location_url" class="location"></a>
        <span class="until" tal:condition="python:event.start != event.end">&ndash;
          until <span tal:content="python:event.end.strftime('%H:%M')">12:00</span>
          <span tal:condition="python:event.start.day != event.end.day" tal:content="python:event.end.strftime('%A')"/>
        </span>
      </td>
    </tr>
    </tal:block>
    </tal:block>
    </tal:block>
  </table>

